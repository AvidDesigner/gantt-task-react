{"version":3,"file":"index.modern.js","sources":["../src/types/public-types.ts","../src/helpers/date-helper.ts","../src/components/task-list/task-list-header.tsx","../src/components/task-list/task-list-table.tsx","../src/components/other/tooltip.tsx","../src/components/other/vertical-scroll.tsx","../src/components/task-list/task-list.tsx","../src/components/grid/grid-body.tsx","../src/components/grid/grid.tsx","../src/components/calendar/top-part-of-calendar.tsx","../src/components/calendar/calendar.tsx","../node_modules/babel-plugin-transform-async-to-promises/helpers.mjs","../src/components/other/arrow.tsx","../src/helpers/bar-helper.ts","../src/helpers/other-helper.ts","../src/components/task-item/bar/bar-display.tsx","../src/components/task-item/bar/bar-date-handle.tsx","../src/components/task-item/bar/bar-progress-handle.tsx","../src/components/task-item/bar/bar.tsx","../src/components/task-item/bar/bar-small.tsx","../src/components/task-item/milestone/milestone.tsx","../src/components/task-item/project/project.tsx","../src/components/task-item/task-item.tsx","../src/components/gantt/task-gantt-content.tsx","../src/components/gantt/task-gantt.tsx","../src/components/other/horizontal-scroll.tsx","../src/components/gantt/gantt.tsx"],"sourcesContent":["export enum ViewMode {\r\n  Hour = \"Hour\",\r\n  QuarterDay = \"Quarter Day\",\r\n  HalfDay = \"Half Day\",\r\n  Day = \"Day\",\r\n  /** ISO-8601 week */\r\n  Week = \"Week\",\r\n  Month = \"Month\",\r\n  QuarterYear = \"QuarterYear\",\r\n  Year = \"Year\",\r\n}\r\nexport type TaskType = \"task\" | \"milestone\" | \"project\";\r\nexport interface Task {\r\n  id: string;\r\n  type: TaskType;\r\n  name: string;\r\n  start: Date;\r\n  end: Date;\r\n  /**\r\n   * From 0 to 100\r\n   */\r\n  progress: number;\r\n  styles?: {\r\n    backgroundColor?: string;\r\n    backgroundSelectedColor?: string;\r\n    progressColor?: string;\r\n    progressSelectedColor?: string;\r\n  };\r\n  isDisabled?: boolean;\r\n  project?: string;\r\n  dependencies?: string[];\r\n  hideChildren?: boolean;\r\n  displayOrder?: number;\r\n  hide?: boolean;\r\n}\r\n\r\nexport interface EventOption {\r\n  /**\r\n   * Time step value for date changes.\r\n   */\r\n  timeStep?: number;\r\n  /**\r\n   * Invokes on bar select on unselect.\r\n   */\r\n  onSelect?: (task: Task, isSelected: boolean) => void;\r\n  /**\r\n   * Invokes on bar double click.\r\n   */\r\n  onDoubleClick?: (task: Task) => void;\r\n  /**\r\n   * Invokes on bar click.\r\n   */\r\n  onClick?: (task: Task) => void;\r\n  /**\r\n   * Invokes on end and start time change. Chart undoes operation if method return false or error.\r\n   */\r\n  onDateChange?: (\r\n    task: Task,\r\n    children: Task[]\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on progress change. Chart undoes operation if method return false or error.\r\n   */\r\n  onProgressChange?: (\r\n    task: Task,\r\n    children: Task[]\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on delete selected task. Chart undoes operation if method return false or error.\r\n   */\r\n  onDelete?: (task: Task) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on expander on task list\r\n   */\r\n  onExpanderClick?: (task: Task) => void;\r\n}\r\n\r\nexport interface DisplayOption {\r\n  viewMode?: ViewMode;\r\n  viewDate?: Date;\r\n  preStepsCount?: number;\r\n  /**\r\n   * Specifies the month name language. Able formats: ISO 639-2, Java Locale\r\n   */\r\n  locale?: string;\r\n  rtl?: boolean;\r\n}\r\n\r\nexport interface StylingOption {\r\n  headerHeight?: number;\r\n  columnWidth?: number;\r\n  listCellWidth?: string;\r\n  rowHeight?: number;\r\n  ganttHeight?: number;\r\n  barCornerRadius?: number;\r\n  handleWidth?: number;\r\n  fontFamily?: string;\r\n  fontSize?: string;\r\n  /**\r\n   * How many of row width can be taken by task.\r\n   * From 0 to 100\r\n   */\r\n  barFill?: number;\r\n  barProgressColor?: string;\r\n  barProgressSelectedColor?: string;\r\n  barBackgroundColor?: string;\r\n  barBackgroundSelectedColor?: string;\r\n  projectProgressColor?: string;\r\n  projectProgressSelectedColor?: string;\r\n  projectBackgroundColor?: string;\r\n  projectBackgroundSelectedColor?: string;\r\n  milestoneBackgroundColor?: string;\r\n  milestoneBackgroundSelectedColor?: string;\r\n  arrowColor?: string;\r\n  arrowIndent?: number;\r\n  todayColor?: string;\r\n  TooltipContent?: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n  TaskListHeader?: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable?: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    /**\r\n     * Sets selected task by id\r\n     */\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n}\r\n\r\nexport interface GanttProps extends EventOption, DisplayOption, StylingOption {\r\n  tasks: Task[];\r\n}\r\n","import { Task, ViewMode } from \"../types/public-types\";\r\nimport DateTimeFormatOptions = Intl.DateTimeFormatOptions;\r\nimport DateTimeFormat = Intl.DateTimeFormat;\r\n\r\ntype DateHelperScales =\r\n  | \"year\"\r\n  | \"month\"\r\n  | \"day\"\r\n  | \"hour\"\r\n  | \"minute\"\r\n  | \"second\"\r\n  | \"millisecond\";\r\n\r\nconst intlDTCache = {};\r\nexport const getCachedDateTimeFormat = (\r\n  locString: string | string[],\r\n  opts: DateTimeFormatOptions = {}\r\n): DateTimeFormat => {\r\n  const key = JSON.stringify([locString, opts]);\r\n  let dtf = intlDTCache[key];\r\n  if (!dtf) {\r\n    dtf = new Intl.DateTimeFormat(locString, opts);\r\n    intlDTCache[key] = dtf;\r\n  }\r\n  return dtf;\r\n};\r\n\r\nexport const addToDate = (\r\n  date: Date,\r\n  quantity: number,\r\n  scale: DateHelperScales\r\n) => {\r\n  const newDate = new Date(\r\n    date.getFullYear() + (scale === \"year\" ? quantity : 0),\r\n    date.getMonth() + (scale === \"month\" ? quantity : 0),\r\n    date.getDate() + (scale === \"day\" ? quantity : 0),\r\n    date.getHours() + (scale === \"hour\" ? quantity : 0),\r\n    date.getMinutes() + (scale === \"minute\" ? quantity : 0),\r\n    date.getSeconds() + (scale === \"second\" ? quantity : 0),\r\n    date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0)\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const startOfDate = (date: Date, scale: DateHelperScales) => {\r\n  const scores = [\r\n    \"millisecond\",\r\n    \"second\",\r\n    \"minute\",\r\n    \"hour\",\r\n    \"day\",\r\n    \"month\",\r\n    \"year\",\r\n  ];\r\n\r\n  const shouldReset = (_scale: DateHelperScales) => {\r\n    const maxScore = scores.indexOf(scale);\r\n    return scores.indexOf(_scale) <= maxScore;\r\n  };\r\n  const newDate = new Date(\r\n    date.getFullYear(),\r\n    shouldReset(\"year\") ? 0 : date.getMonth(),\r\n    shouldReset(\"month\") ? 1 : date.getDate(),\r\n    shouldReset(\"day\") ? 0 : date.getHours(),\r\n    shouldReset(\"hour\") ? 0 : date.getMinutes(),\r\n    shouldReset(\"minute\") ? 0 : date.getSeconds(),\r\n    shouldReset(\"second\") ? 0 : date.getMilliseconds()\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const ganttDateRange = (\r\n  tasks: Task[],\r\n  viewMode: ViewMode,\r\n  preStepsCount: number\r\n) => {\r\n  const tasksWithDates = tasks.filter(task => !!task.start && !!task.end);\r\n  let newStartDate: Date = new Date();\r\n  const month = newStartDate.getMonth();\r\n  let newEndDate: Date = new Date(\r\n    newStartDate.getDate(),\r\n    month + 2,\r\n    newStartDate.getFullYear()\r\n  );\r\n\r\n  if (tasksWithDates) {\r\n    newStartDate = tasksWithDates[0].start;\r\n    newEndDate = tasksWithDates[0].end;\r\n  }\r\n\r\n  for (const task of tasks) {\r\n    if (!!task.start && task.start < newStartDate) {\r\n      newStartDate = task.start;\r\n    }\r\n    if (!!task.end && task.end > newEndDate) {\r\n      newEndDate = task.end;\r\n    }\r\n  }\r\n  switch (viewMode) {\r\n    case ViewMode.Year:\r\n      newStartDate = addToDate(newStartDate, -1, \"year\");\r\n      newStartDate = startOfDate(newStartDate, \"year\");\r\n      newEndDate = addToDate(newEndDate, 1, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.QuarterYear:\r\n      newStartDate = addToDate(newStartDate, -3, \"month\");\r\n      newStartDate = startOfDate(newStartDate, \"month\");\r\n      newEndDate = addToDate(newEndDate, 3, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.Month:\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"month\");\r\n      newStartDate = startOfDate(newStartDate, \"month\");\r\n      newEndDate = addToDate(newEndDate, 1, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.Week:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(\r\n        getMonday(newStartDate),\r\n        -7 * preStepsCount,\r\n        \"day\"\r\n      );\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\r\n      break;\r\n    case ViewMode.Day:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 19, \"day\");\r\n      break;\r\n    case ViewMode.QuarterDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 66, \"hour\"); // 24(1 day)*3 - 6\r\n      break;\r\n    case ViewMode.HalfDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 108, \"hour\"); // 24(1 day)*5 - 12\r\n      break;\r\n    case ViewMode.Hour:\r\n      newStartDate = startOfDate(newStartDate, \"hour\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"hour\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 1, \"day\");\r\n      break;\r\n  }\r\n  return [newStartDate, newEndDate];\r\n};\r\n\r\nexport const seedDates = (\r\n  startDate: Date,\r\n  endDate: Date,\r\n  viewMode: ViewMode\r\n) => {\r\n  let currentDate: Date = new Date(startDate);\r\n  const dates: Date[] = [currentDate];\r\n  while (currentDate < endDate) {\r\n    switch (viewMode) {\r\n      case ViewMode.Year:\r\n        currentDate = addToDate(currentDate, 1, \"year\");\r\n        break;\r\n      case ViewMode.QuarterYear:\r\n        currentDate = addToDate(currentDate, 3, \"month\");\r\n        break;\r\n      case ViewMode.Month:\r\n        currentDate = addToDate(currentDate, 1, \"month\");\r\n        break;\r\n      case ViewMode.Week:\r\n        currentDate = addToDate(currentDate, 7, \"day\");\r\n        break;\r\n      case ViewMode.Day:\r\n        currentDate = addToDate(currentDate, 1, \"day\");\r\n        break;\r\n      case ViewMode.HalfDay:\r\n        currentDate = addToDate(currentDate, 12, \"hour\");\r\n        break;\r\n      case ViewMode.QuarterDay:\r\n        currentDate = addToDate(currentDate, 6, \"hour\");\r\n        break;\r\n      case ViewMode.Hour:\r\n        currentDate = addToDate(currentDate, 1, \"hour\");\r\n        break;\r\n    }\r\n    dates.push(currentDate);\r\n  }\r\n  return dates;\r\n};\r\n\r\nexport const getLocaleMonth = (date: Date, locale: string) => {\r\n  let bottomValue = getCachedDateTimeFormat(locale, {\r\n    month: \"long\",\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\n\r\nexport const getLocalDayOfWeek = (\r\n  date: Date,\r\n  locale: string,\r\n  format?: \"long\" | \"short\" | \"narrow\" | undefined\r\n) => {\r\n  let bottomValue = getCachedDateTimeFormat(locale, {\r\n    weekday: format,\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\n\r\n/**\r\n * Returns monday of current week\r\n * @param date date for modify\r\n */\r\nconst getMonday = (date: Date) => {\r\n  const day = date.getDay();\r\n  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\r\n  return new Date(date.setDate(diff));\r\n};\r\n\r\nexport const getWeekNumberISO8601 = (date: Date) => {\r\n  const tmpDate = new Date(date.valueOf());\r\n  const dayNumber = (tmpDate.getDay() + 6) % 7;\r\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\r\n  const firstThursday = tmpDate.valueOf();\r\n  tmpDate.setMonth(0, 1);\r\n  if (tmpDate.getDay() !== 4) {\r\n    tmpDate.setMonth(0, 1 + ((4 - tmpDate.getDay() + 7) % 7));\r\n  }\r\n  const weekNumber = (\r\n    1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)\r\n  ).toString();\r\n\r\n  if (weekNumber.length === 1) {\r\n    return `0${weekNumber}`;\r\n  } else {\r\n    return weekNumber;\r\n  }\r\n};\r\n\r\nexport const getDaysInMonth = (month: number, year: number) => {\r\n  return new Date(year, month + 1, 0).getDate();\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./task-list-header.module.css\";\r\n\r\nexport const TaskListHeaderDefault: React.FC<{\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n}> = ({ headerHeight, fontFamily, fontSize, rowWidth }) => {\r\n  return (\r\n    <div\r\n      className={styles.ganttTable}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      <div\r\n        className={styles.ganttTable_Header}\r\n        style={{\r\n          height: headerHeight - 2,\r\n        }}\r\n      >\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;Name\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.2,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;From\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.25,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;To\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport styles from \"./task-list-table.module.css\";\r\nimport { Task } from \"../../types/public-types\";\r\n\r\nconst localeDateStringCache = {};\r\nconst toLocaleDateStringFactory =\r\n  (locale: string) =>\r\n  (date: Date, dateTimeOptions: Intl.DateTimeFormatOptions) => {\r\n    const key = date.toString();\r\n    let lds = localeDateStringCache[key];\r\n    if (!lds) {\r\n      lds = date.toLocaleDateString(locale, dateTimeOptions);\r\n      localeDateStringCache[key] = lds;\r\n    }\r\n    return lds;\r\n  };\r\nconst dateTimeOptions: Intl.DateTimeFormatOptions = {\r\n  weekday: \"short\",\r\n  year: \"numeric\",\r\n  month: \"long\",\r\n  day: \"numeric\",\r\n};\r\n\r\nexport const TaskListTableDefault: React.FC<{\r\n  rowHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  locale: string;\r\n  tasks: Task[];\r\n  selectedTaskId: string;\r\n  setSelectedTask: (taskId: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n}> = ({\r\n  rowHeight,\r\n  rowWidth,\r\n  tasks,\r\n  fontFamily,\r\n  fontSize,\r\n  locale,\r\n  onExpanderClick,\r\n}) => {\r\n  const toLocaleDateString = useMemo(\r\n    () => toLocaleDateStringFactory(locale),\r\n    [locale]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={styles.taskListWrapper}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      {tasks.map(t => {\r\n        let expanderSymbol = \"\";\r\n        if (t.hideChildren === false) {\r\n          expanderSymbol = \"▼\";\r\n        } else if (t.hideChildren === true) {\r\n          expanderSymbol = \"▶\";\r\n        }\r\n\r\n        return (\r\n          <div\r\n            className={styles.taskListTableRow}\r\n            style={{ height: rowHeight }}\r\n            key={`${t.id}row`}\r\n          >\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n              title={t.name}\r\n            >\r\n              <div className={styles.taskListNameWrapper}>\r\n                <div\r\n                  className={\r\n                    expanderSymbol\r\n                      ? styles.taskListExpander\r\n                      : styles.taskListEmptyExpander\r\n                  }\r\n                  onClick={() => onExpanderClick(t)}\r\n                >\r\n                  {expanderSymbol}\r\n                </div>\r\n                <div>{t.name}</div>\r\n              </div>\r\n            </div>\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n            >\r\n              &nbsp;{toLocaleDateString(t.start, dateTimeOptions)}\r\n            </div>\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n            >\r\n              &nbsp;{toLocaleDateString(t.end, dateTimeOptions)}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport styles from \"./tooltip.module.css\";\r\n\r\nexport type TooltipProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  rtl: boolean;\r\n  svgContainerHeight: number;\r\n  svgContainerWidth: number;\r\n  svgWidth: number;\r\n  headerHeight: number;\r\n  taskListWidth: number;\r\n  scrollX: number;\r\n  scrollY: number;\r\n  rowHeight: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  TooltipContent: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n};\r\nexport const Tooltip: React.FC<TooltipProps> = ({\r\n  task,\r\n  rowHeight,\r\n  rtl,\r\n  svgContainerHeight,\r\n  svgContainerWidth,\r\n  scrollX,\r\n  scrollY,\r\n  arrowIndent,\r\n  fontSize,\r\n  fontFamily,\r\n  headerHeight,\r\n  taskListWidth,\r\n  TooltipContent,\r\n}) => {\r\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\r\n  const [relatedY, setRelatedY] = useState(0);\r\n  const [relatedX, setRelatedX] = useState(0);\r\n  useEffect(() => {\r\n    if (tooltipRef.current) {\r\n      const tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\r\n      const tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\r\n\r\n      let newRelatedY = task.index * rowHeight - scrollY + headerHeight;\r\n      let newRelatedX: number;\r\n      if (rtl) {\r\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\r\n        if (newRelatedX < 0) {\r\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\r\n        }\r\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n        if (tooltipLeftmostPoint > svgContainerWidth) {\r\n          newRelatedX = svgContainerWidth - tooltipWidth;\r\n          newRelatedY += rowHeight;\r\n        }\r\n      } else {\r\n        newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\r\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n        const fullChartWidth = taskListWidth + svgContainerWidth;\r\n        if (tooltipLeftmostPoint > fullChartWidth) {\r\n          newRelatedX =\r\n            task.x1 +\r\n            taskListWidth -\r\n            arrowIndent * 1.5 -\r\n            scrollX -\r\n            tooltipWidth;\r\n        }\r\n        if (newRelatedX < taskListWidth) {\r\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\r\n          newRelatedY += rowHeight;\r\n        }\r\n      }\r\n\r\n      const tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\r\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\r\n        newRelatedY = svgContainerHeight - tooltipHeight;\r\n      }\r\n      setRelatedY(newRelatedY);\r\n      setRelatedX(newRelatedX);\r\n    }\r\n  }, [\r\n    tooltipRef,\r\n    task,\r\n    arrowIndent,\r\n    scrollX,\r\n    scrollY,\r\n    headerHeight,\r\n    taskListWidth,\r\n    rowHeight,\r\n    svgContainerHeight,\r\n    svgContainerWidth,\r\n    rtl,\r\n  ]);\r\n\r\n  return (\r\n    <div\r\n      ref={tooltipRef}\r\n      className={\r\n        relatedX\r\n          ? styles.tooltipDetailsContainer\r\n          : styles.tooltipDetailsContainerHidden\r\n      }\r\n      style={{ left: relatedX, top: relatedY }}\r\n    >\r\n      <TooltipContent task={task} fontSize={fontSize} fontFamily={fontFamily} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const StandardTooltipContent: React.FC<{\r\n  task: Task;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n}> = ({ task, fontSize, fontFamily }) => {\r\n  const style = {\r\n    fontSize,\r\n    fontFamily,\r\n  };\r\n  return (\r\n    <div className={styles.tooltipDefaultContainer} style={style}>\r\n      <b style={{ fontSize: fontSize + 6 }}>{`${\r\n        task.name\r\n      }: ${task.start.getDate()}-${\r\n        task.start.getMonth() + 1\r\n      }-${task.start.getFullYear()} - ${task.end.getDate()}-${\r\n        task.end.getMonth() + 1\r\n      }-${task.end.getFullYear()}`}</b>\r\n      {task.end.getTime() - task.start.getTime() !== 0 && (\r\n        <p className={styles.tooltipDefaultContainerParagraph}>{`Duration: ${~~(\r\n          (task.end.getTime() - task.start.getTime()) /\r\n          (1000 * 60 * 60 * 24)\r\n        )} day(s)`}</p>\r\n      )}\r\n\r\n      <p className={styles.tooltipDefaultContainerParagraph}>\r\n        {!!task.progress && `Progress: ${task.progress} %`}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport styles from \"./vertical-scroll.module.css\";\r\n\r\nexport const VerticalScroll: React.FC<{\r\n  scroll: number;\r\n  ganttHeight: number;\r\n  ganttFullHeight: number;\r\n  headerHeight: number;\r\n  rtl: boolean;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n}> = ({\r\n  scroll,\r\n  ganttHeight,\r\n  ganttFullHeight,\r\n  headerHeight,\r\n  rtl,\r\n  onScroll,\r\n}) => {\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scroll;\r\n    }\r\n  }, [scroll]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: ganttHeight,\r\n        marginTop: headerHeight,\r\n        marginLeft: rtl ? \"\" : \"-1rem\",\r\n      }}\r\n      className={styles.scroll}\r\n      onScroll={onScroll}\r\n      ref={scrollRef}\r\n    >\r\n      <div style={{ height: ganttFullHeight, width: 1 }} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Task } from \"../../types/public-types\";\r\n\r\nexport type TaskListProps = {\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  rowHeight: number;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  locale: string;\r\n  tasks: Task[];\r\n  taskListRef: React.RefObject<HTMLDivElement>;\r\n  horizontalContainerClass?: string;\r\n  selectedTask: BarTask | undefined;\r\n  setSelectedTask: (task: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n  TaskListHeader: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n};\r\n\r\nexport const TaskList: React.FC<TaskListProps> = ({\r\n  headerHeight,\r\n  fontFamily,\r\n  fontSize,\r\n  rowWidth,\r\n  rowHeight,\r\n  scrollY,\r\n  tasks,\r\n  selectedTask,\r\n  setSelectedTask,\r\n  onExpanderClick,\r\n  locale,\r\n  ganttHeight,\r\n  taskListRef,\r\n  horizontalContainerClass,\r\n  TaskListHeader,\r\n  TaskListTable,\r\n}) => {\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  const headerProps = {\r\n    headerHeight,\r\n    fontFamily,\r\n    fontSize,\r\n    rowWidth,\r\n  };\r\n  const selectedTaskId = selectedTask ? selectedTask.id : \"\";\r\n  const tableProps = {\r\n    rowHeight,\r\n    rowWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks,\r\n    locale,\r\n    selectedTaskId: selectedTaskId,\r\n    setSelectedTask,\r\n    onExpanderClick,\r\n  };\r\n\r\n  return (\r\n    <div ref={taskListRef}>\r\n      <TaskListHeader {...headerProps} />\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={horizontalContainerClass}\r\n        style={ganttHeight ? { height: ganttHeight } : {}}\r\n      >\r\n        <TaskListTable {...tableProps} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport { addToDate } from \"../../helpers/date-helper\";\r\nimport styles from \"./grid.module.css\";\r\n\r\nexport type GridBodyProps = {\r\n  tasks: Task[];\r\n  dates: Date[];\r\n  svgWidth: number;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  todayColor: string;\r\n  rtl: boolean;\r\n};\r\nexport const GridBody: React.FC<GridBodyProps> = ({\r\n  tasks,\r\n  dates,\r\n  rowHeight,\r\n  svgWidth,\r\n  columnWidth,\r\n  todayColor,\r\n  rtl,\r\n}) => {\r\n  let y = 0;\r\n  const gridRows: ReactChild[] = [];\r\n  const rowLines: ReactChild[] = [\r\n    <line\r\n      key=\"RowLineFirst\"\r\n      x=\"0\"\r\n      y1={0}\r\n      x2={svgWidth}\r\n      y2={0}\r\n      className={styles.gridRowLine}\r\n    />,\r\n  ];\r\n  for (const task of tasks) {\r\n    gridRows.push(\r\n      <rect\r\n        key={\"Row\" + task.id}\r\n        x=\"0\"\r\n        y={y}\r\n        width={svgWidth}\r\n        height={rowHeight}\r\n        className={styles.gridRow}\r\n      />\r\n    );\r\n    rowLines.push(\r\n      <line\r\n        key={\"RowLine\" + task.id}\r\n        x=\"0\"\r\n        y1={y + rowHeight}\r\n        x2={svgWidth}\r\n        y2={y + rowHeight}\r\n        className={styles.gridRowLine}\r\n      />\r\n    );\r\n    y += rowHeight;\r\n  }\r\n\r\n  const now = new Date();\r\n  let tickX = 0;\r\n  const ticks: ReactChild[] = [];\r\n  let today: ReactChild = <rect />;\r\n  for (let i = 0; i < dates.length; i++) {\r\n    const date = dates[i];\r\n    ticks.push(\r\n      <line\r\n        key={date.getTime()}\r\n        x1={tickX}\r\n        y1={0}\r\n        x2={tickX}\r\n        y2={y}\r\n        className={styles.gridTick}\r\n      />\r\n    );\r\n    if (\r\n      (i + 1 !== dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        dates[i + 1].getTime() >= now.getTime()) ||\r\n      // if current date is last\r\n      (i !== 0 &&\r\n        i + 1 === dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        addToDate(\r\n          date,\r\n          date.getTime() - dates[i - 1].getTime(),\r\n          \"millisecond\"\r\n        ).getTime() >= now.getTime())\r\n    ) {\r\n      today = (\r\n        <rect\r\n          x={tickX}\r\n          y={0}\r\n          width={columnWidth}\r\n          height={y}\r\n          fill={todayColor}\r\n        />\r\n      );\r\n    }\r\n    // rtl for today\r\n    if (\r\n      rtl &&\r\n      i + 1 !== dates.length &&\r\n      date.getTime() >= now.getTime() &&\r\n      dates[i + 1].getTime() < now.getTime()\r\n    ) {\r\n      today = (\r\n        <rect\r\n          x={tickX + columnWidth}\r\n          y={0}\r\n          width={columnWidth}\r\n          height={y}\r\n          fill={todayColor}\r\n        />\r\n      );\r\n    }\r\n    tickX += columnWidth;\r\n  }\r\n  return (\r\n    <g className=\"gridBody\">\r\n      <g className=\"rows\">{gridRows}</g>\r\n      <g className=\"rowLines\">{rowLines}</g>\r\n      <g className=\"ticks\">{ticks}</g>\r\n      <g className=\"today\">{today}</g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { GridBody, GridBodyProps } from \"./grid-body\";\r\n\r\nexport type GridProps = GridBodyProps;\r\nexport const Grid: React.FC<GridProps> = props => {\r\n  return (\r\n    <g className=\"grid\">\r\n      <GridBody {...props} />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\ntype TopPartOfCalendarProps = {\r\n  value: string;\r\n  x1Line: number;\r\n  y1Line: number;\r\n  y2Line: number;\r\n  xText: number;\r\n  yText: number;\r\n};\r\n\r\nexport const TopPartOfCalendar: React.FC<TopPartOfCalendarProps> = ({\r\n  value,\r\n  // x1Line,\r\n  // y1Line,\r\n  // y2Line,\r\n  xText,\r\n  yText,\r\n}) => {\r\n  return (\r\n    <g className=\"calendarTop\">\r\n      {/* <line\r\n        x1={x1Line}\r\n        y1={y1Line}\r\n        x2={x1Line}\r\n        y2={y2Line}\r\n        className={styles.calendarTopTick}\r\n        key={value + \"line\"}\r\n      /> */}\r\n      <text\r\n        key={value + \"text\"}\r\n        y={yText}\r\n        x={xText}\r\n        className={styles.calendarTopText}\r\n      >\r\n        {value}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { ViewMode } from \"../../types/public-types\";\r\nimport { TopPartOfCalendar } from \"./top-part-of-calendar\";\r\nimport {\r\n  getCachedDateTimeFormat,\r\n  getDaysInMonth,\r\n  getLocalDayOfWeek,\r\n  getLocaleMonth,\r\n  getWeekNumberISO8601,\r\n} from \"../../helpers/date-helper\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport styles from \"./calendar.module.css\";\r\nimport { format as formatDate } from \"date-fns\";\r\n\r\nexport type CalendarProps = {\r\n  dateSetup: DateSetup;\r\n  locale: string;\r\n  viewMode: ViewMode;\r\n  rtl: boolean;\r\n  headerHeight: number;\r\n  columnWidth: number;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n};\r\n\r\nexport const Calendar: React.FC<CalendarProps> = ({\r\n  dateSetup,\r\n  locale,\r\n  viewMode,\r\n  rtl,\r\n  headerHeight,\r\n  columnWidth,\r\n  fontFamily,\r\n  fontSize,\r\n}) => {\r\n  const getCalendarValuesForYear = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      const bottomValue = date.getFullYear();\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getFullYear() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getFullYear()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={headerHeight}\r\n            xText={xText}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForQuarterYear = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      // const bottomValue = getLocaleMonth(date, locale);\r\n      const quarter = \"Q\" + Math.floor((date.getMonth() + 3) / 3);\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {quarter}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getMonth()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={Math.abs(xText)}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForMonth = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      const bottomValue = formatDate(new Date(date), \"MMM\");\r\n      bottomValues.push(\r\n        <text\r\n          key={bottomValue + date.getFullYear()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getMonth()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={xText}\r\n            yText={topDefaultHeight * 0.5}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForWeek = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    let weeksCount: number = 1;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = dates.length - 1; i >= 0; i--) {\r\n      const date = dates[i];\r\n      let topValue = \"\";\r\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\r\n        // top\r\n        topValue = `${getLocaleMonth(date, locale)}, ${date.getFullYear()}`;\r\n      }\r\n      // bottom\r\n      const bottomValue = `W${getWeekNumberISO8601(date)}`;\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n\r\n      if (topValue) {\r\n        // if last day is new month\r\n        if (i !== dates.length - 1) {\r\n          topValues.push(\r\n            <TopPartOfCalendar\r\n              key={topValue}\r\n              value={topValue}\r\n              x1Line={columnWidth * i + weeksCount * columnWidth}\r\n              y1Line={0}\r\n              y2Line={topDefaultHeight}\r\n              xText={columnWidth * i + columnWidth * weeksCount * 0.5}\r\n              yText={topDefaultHeight * 0.8}\r\n            />\r\n          );\r\n        }\r\n        weeksCount = 0;\r\n      }\r\n      weeksCount++;\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForDay = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = `${formatDate(new Date(date), \"do\")}`;\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.4}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i + 1 !== dates.length &&\r\n        date.getMonth() !== dates[i + 1].getMonth()\r\n      ) {\r\n        const topValue = formatDate(new Date(date), \"MMMM\");\r\n\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * (i + 1)}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={\r\n              columnWidth * (i + 1) -\r\n              getDaysInMonth(date.getMonth(), date.getFullYear()) *\r\n                columnWidth *\r\n                0.5\r\n            }\r\n            yText={topDefaultHeight * 0.8}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForPartOfDay = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = getCachedDateTimeFormat(locale, {\r\n        hour: \"numeric\",\r\n      }).format(date);\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n          fontFamily={fontFamily}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\r\n        const topValue = `${getLocalDayOfWeek(\r\n          date,\r\n          locale,\r\n          \"short\"\r\n        )}, ${date.getDate()} ${getLocaleMonth(date, locale)}`;\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * i + ticks * columnWidth}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={columnWidth * i + ticks * columnWidth * 0.5}\r\n            yText={topDefaultHeight * 0.8}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForHour = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = getCachedDateTimeFormat(locale, {\r\n        hour: \"numeric\",\r\n      }).format(date);\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n          fontFamily={fontFamily}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (i !== 0 && date.getDate() !== dates[i - 1].getDate()) {\r\n        const displayDate = dates[i - 1];\r\n        const topValue = `${getLocalDayOfWeek(\r\n          displayDate,\r\n          locale,\r\n          \"long\"\r\n        )}, ${displayDate.getDate()} ${getLocaleMonth(displayDate, locale)}`;\r\n        const topPosition = (date.getHours() - 24) / 2;\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + displayDate.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={columnWidth * (i + topPosition)}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  let topValues: ReactChild[] = [];\r\n  let bottomValues: ReactChild[] = [];\r\n  switch (dateSetup.viewMode) {\r\n    case ViewMode.Year:\r\n      [topValues, bottomValues] = getCalendarValuesForYear();\r\n      break;\r\n    case ViewMode.QuarterYear:\r\n      [topValues, bottomValues] = getCalendarValuesForQuarterYear();\r\n      break;\r\n    case ViewMode.Month:\r\n      [topValues, bottomValues] = getCalendarValuesForMonth();\r\n      break;\r\n    case ViewMode.Week:\r\n      [topValues, bottomValues] = getCalendarValuesForWeek();\r\n      break;\r\n    case ViewMode.Day:\r\n      [topValues, bottomValues] = getCalendarValuesForDay();\r\n      break;\r\n    case ViewMode.QuarterDay:\r\n    case ViewMode.HalfDay:\r\n      [topValues, bottomValues] = getCalendarValuesForPartOfDay();\r\n      break;\r\n    case ViewMode.Hour:\r\n      [topValues, bottomValues] = getCalendarValuesForHour();\r\n  }\r\n  return (\r\n    <g className=\"calendar\" fontSize={fontSize} fontFamily={fontFamily}>\r\n      <rect\r\n        x={0}\r\n        y={0}\r\n        width={columnWidth * dateSetup.dates.length}\r\n        height={headerHeight}\r\n        className={styles.calendarHeader}\r\n      />\r\n      {bottomValues} {topValues}\r\n    </g>\r\n  );\r\n};\r\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import React from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\n\r\ntype ArrowProps = {\r\n  taskFrom: BarTask;\r\n  taskTo: BarTask;\r\n  rowHeight: number;\r\n  taskHeight: number;\r\n  arrowIndent: number;\r\n  rtl: boolean;\r\n};\r\nexport const Arrow: React.FC<ArrowProps> = ({\r\n  taskFrom,\r\n  taskTo,\r\n  rowHeight,\r\n  taskHeight,\r\n  arrowIndent,\r\n  rtl,\r\n}) => {\r\n  let path: string;\r\n  let trianglePoints: string;\r\n  if (rtl) {\r\n    [path, trianglePoints] = drownPathAndTriangleRTL(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  } else {\r\n    [path, trianglePoints] = drownPathAndTriangle(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  }\r\n\r\n  return (\r\n    <g className=\"arrow\">\r\n      <path strokeWidth=\"1.5\" d={path} fill=\"none\" />\r\n      <polygon points={trianglePoints} />\r\n    </g>\r\n  );\r\n};\r\n\r\nconst drownPathAndTriangle = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x1 ? \"\" : `H ${taskTo.x1 - arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x1\r\n      ? arrowIndent\r\n      : taskTo.x1 - taskFrom.x2 - arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x2} ${taskFrom.y + taskHeight / 2} \r\n  h ${arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x1},${taskToEndPosition} \r\n  ${taskTo.x1 - 5},${taskToEndPosition - 5} \r\n  ${taskTo.x1 - 5},${taskToEndPosition + 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n\r\nconst drownPathAndTriangleRTL = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x2 ? \"\" : `H ${taskTo.x2 + arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x2\r\n      ? -arrowIndent\r\n      : taskTo.x2 - taskFrom.x1 + arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x1} ${taskFrom.y + taskHeight / 2} \r\n  h ${-arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x2},${taskToEndPosition} \r\n  ${taskTo.x2 + 5},${taskToEndPosition + 5} \r\n  ${taskTo.x2 + 5},${taskToEndPosition - 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n","import { Task } from \"../types/public-types\";\r\nimport { BarTask, TaskTypeInternal } from \"../types/bar-task\";\r\nimport { BarMoveAction } from \"../types/gantt-task-actions\";\r\n\r\nexport const convertToBarTasks = (\r\n  tasks: Task[],\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n) => {\r\n  let barTasks = tasks.map((t, i) => {\r\n    return convertToBarTask(\r\n      t,\r\n      i,\r\n      dates,\r\n      columnWidth,\r\n      rowHeight,\r\n      taskHeight,\r\n      barCornerRadius,\r\n      handleWidth,\r\n      rtl,\r\n      barProgressColor,\r\n      barProgressSelectedColor,\r\n      barBackgroundColor,\r\n      barBackgroundSelectedColor,\r\n      projectProgressColor,\r\n      projectProgressSelectedColor,\r\n      projectBackgroundColor,\r\n      projectBackgroundSelectedColor,\r\n      milestoneBackgroundColor,\r\n      milestoneBackgroundSelectedColor\r\n    );\r\n  });\r\n\r\n  // set dependencies\r\n  barTasks = barTasks.map(task => {\r\n    const dependencies = task.dependencies || [];\r\n    for (let j = 0; j < dependencies.length; j++) {\r\n      const dependence = barTasks.findIndex(\r\n        value => value.id === dependencies[j]\r\n      );\r\n      if (dependence !== -1) barTasks[dependence].barChildren.push(task);\r\n    }\r\n    return task;\r\n  });\r\n\r\n  return barTasks;\r\n};\r\n\r\nconst convertToBarTask = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let barTask: BarTask;\r\n  switch (task.type) {\r\n    case \"milestone\":\r\n      barTask = convertToMilestone(\r\n        task,\r\n        index,\r\n        dates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      );\r\n      break;\r\n    case \"project\":\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor\r\n      );\r\n      break;\r\n    default:\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor\r\n      );\r\n      break;\r\n  }\r\n  return barTask;\r\n};\r\n\r\nconst convertToBar = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let x1: number | null;\r\n  let x2: number | null;\r\n  if (rtl) {\r\n    x2 = task.start ? taskXCoordinateRTL(task.start, dates, columnWidth) : null;\r\n    x1 = task.end ? taskXCoordinateRTL(task.end, dates, columnWidth) : null;\r\n  } else {\r\n    x1 = task.start ? taskXCoordinate(task.start, dates, columnWidth) : null;\r\n    x2 = task.end ? taskXCoordinate(task.end, dates, columnWidth) : null;\r\n  }\r\n  let typeInternal: TaskTypeInternal = task.type;\r\n  if (typeInternal === \"task\" && x2 && x1 && x2 - x1 < handleWidth * 2) {\r\n    typeInternal = \"smalltask\";\r\n    x2 = x1 + handleWidth * 2;\r\n  }\r\n\r\n  const [progressWidth, progressX] = progressWithByParams(\r\n    x1,\r\n    x2,\r\n    task.progress,\r\n    rtl\r\n  );\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n  const hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\r\n\r\n  const styles = {\r\n    backgroundColor: barBackgroundColor,\r\n    backgroundSelectedColor: barBackgroundSelectedColor,\r\n    progressColor: barProgressColor,\r\n    progressSelectedColor: barProgressSelectedColor,\r\n    ...task.styles,\r\n  };\r\n\r\n  const newX1 = x1 ?? 0;\r\n  const newX2 = x2 ?? 0;\r\n\r\n  return {\r\n    ...task,\r\n    typeInternal,\r\n    x1: newX1,\r\n    x2: newX2,\r\n    y,\r\n    index,\r\n    progressX,\r\n    progressWidth,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    hideChildren,\r\n    height: taskHeight,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst convertToMilestone = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  const x = taskXCoordinate(task.start, dates, columnWidth);\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n\r\n  const x1 = x - taskHeight * 0.5;\r\n  const x2 = x + taskHeight * 0.5;\r\n\r\n  const rotatedHeight = taskHeight / 1.414;\r\n  const styles = {\r\n    backgroundColor: milestoneBackgroundColor,\r\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\r\n    progressColor: \"\",\r\n    progressSelectedColor: \"\",\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    end: task.start,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    progressX: 0,\r\n    progressWidth: 0,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    typeInternal: task.type,\r\n    progress: 0,\r\n    height: rotatedHeight,\r\n    hideChildren: undefined,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst taskXCoordinate = (xDate: Date, dates: Date[], columnWidth: number) => {\r\n  const index = dates.findIndex(d => d.getTime() >= xDate.getTime()) - 1;\r\n\r\n  const remainderMillis = xDate.getTime() - dates[index].getTime();\r\n  const percentOfInterval =\r\n    remainderMillis / (dates[index + 1].getTime() - dates[index].getTime());\r\n  const x = index * columnWidth + percentOfInterval * columnWidth;\r\n  return x;\r\n};\r\nconst taskXCoordinateRTL = (\r\n  xDate: Date,\r\n  dates: Date[],\r\n  columnWidth: number\r\n) => {\r\n  let x = taskXCoordinate(xDate, dates, columnWidth);\r\n  x += columnWidth;\r\n  return x;\r\n};\r\nconst taskYCoordinate = (\r\n  index: number,\r\n  rowHeight: number,\r\n  taskHeight: number\r\n) => {\r\n  const y = index * rowHeight + (rowHeight - taskHeight) / 2;\r\n  return y;\r\n};\r\n\r\nexport const progressWithByParams = (\r\n  taskX1: number | null,\r\n  taskX2: number | null,\r\n  progress: number,\r\n  rtl: boolean\r\n) => {\r\n  const progressWidth =\r\n    taskX1 && taskX2 ? (taskX2 - taskX1) * progress * 0.01 : 0;\r\n  let progressX: number;\r\n  if (rtl) {\r\n    progressX = taskX2 ? taskX2 - progressWidth : 0;\r\n  } else {\r\n    progressX = taskX1 ?? 0;\r\n  }\r\n  return [progressWidth, progressX];\r\n};\r\n\r\nexport const progressByProgressWidth = (\r\n  progressWidth: number,\r\n  barTask: BarTask\r\n) => {\r\n  const barWidth = barTask.x2 - barTask.x1;\r\n  const progressPercent = Math.round((progressWidth * 100) / barWidth);\r\n  if (progressPercent >= 100) return 100;\r\n  else if (progressPercent <= 0) return 0;\r\n  else return progressPercent;\r\n};\r\n\r\nconst progressByX = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 100;\r\n  else if (x <= task.x1) return 0;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((x - task.x1) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\nconst progressByXRTL = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 0;\r\n  else if (x <= task.x1) return 100;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((task.x2 - x) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\n\r\nexport const getProgressPoint = (\r\n  progressX: number,\r\n  taskY: number,\r\n  taskHeight: number\r\n) => {\r\n  const point = [\r\n    progressX - 5,\r\n    taskY + taskHeight,\r\n    progressX + 5,\r\n    taskY + taskHeight,\r\n    progressX,\r\n    taskY + taskHeight - 8.66,\r\n  ];\r\n  return point.join(\",\");\r\n};\r\n\r\nconst startByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x >= task.x2 - task.handleWidth * 2) {\r\n    x = task.x2 - task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x1 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst endByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x <= task.x1 + task.handleWidth * 2) {\r\n    x = task.x1 + task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x2) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x2 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst moveByX = (x: number, xStep: number, task: BarTask) => {\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX1 = task.x1 + additionalXValue;\r\n  const newX2 = newX1 + task.x2 - task.x1;\r\n  return [newX1, newX2];\r\n};\r\n\r\nconst dateByX = (\r\n  x: number,\r\n  taskX: number,\r\n  taskDate: Date,\r\n  xStep: number,\r\n  timeStep: number\r\n) => {\r\n  let newDate = new Date(((x - taskX) / xStep) * timeStep + taskDate.getTime());\r\n  newDate = new Date(\r\n    newDate.getTime() +\r\n      (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000\r\n  );\r\n  return newDate;\r\n};\r\n\r\n/**\r\n * Method handles event in real time(mousemove) and on finish(mouseup)\r\n */\r\nexport const handleTaskBySVGMouseEvent = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  let result: { isChanged: boolean; changedTask: BarTask };\r\n  switch (selectedTask.type) {\r\n    case \"milestone\":\r\n      result = handleTaskBySVGMouseEventForMilestone(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta\r\n      );\r\n      break;\r\n    default:\r\n      result = handleTaskBySVGMouseEventForBar(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n      break;\r\n  }\r\n  return result;\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForBar = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"progress\":\r\n      if (rtl) {\r\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\r\n      } else {\r\n        changedTask.progress = progressByX(svgX, selectedTask);\r\n      }\r\n      isChanged = changedTask.progress !== selectedTask.progress;\r\n      if (isChanged) {\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    case \"start\": {\r\n      const newX1 = startByX(svgX, xStep, selectedTask);\r\n      changedTask.x1 = newX1;\r\n      isChanged = changedTask.x1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.end = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.start = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"end\": {\r\n      const newX2 = endByX(svgX, xStep, selectedTask);\r\n      changedTask.x2 = newX2;\r\n      isChanged = changedTask.x2 !== selectedTask.x2;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.start = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.end = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = dateByX(\r\n          newMoveX2,\r\n          selectedTask.x2,\r\n          selectedTask.end,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForMilestone = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = changedTask.start;\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n","import { BarTask } from \"../types/bar-task\";\r\nimport { Task } from \"../types/public-types\";\r\n\r\nexport function isKeyboardEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.KeyboardEvent {\r\n  return (event as React.KeyboardEvent).key !== undefined;\r\n}\r\n\r\nexport function isMouseEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.MouseEvent {\r\n  return (event as React.MouseEvent).clientX !== undefined;\r\n}\r\n\r\nexport function isBarTask(task: Task | BarTask): task is BarTask {\r\n  return (task as BarTask).x1 !== undefined;\r\n}\r\n\r\nexport function removeHiddenTasks(tasks: Task[]) {\r\n  const groupedTasks = tasks.filter(\r\n    t => t.hideChildren && t.type === \"project\"\r\n  );\r\n  if (groupedTasks.length > 0) {\r\n    for (let i = 0; groupedTasks.length > i; i++) {\r\n      const groupedTask = groupedTasks[i];\r\n      const children = getChildren(tasks, groupedTask);\r\n      tasks = tasks.filter(t => children.indexOf(t) === -1);\r\n    }\r\n  }\r\n  return tasks;\r\n}\r\n\r\nfunction getChildren(taskList: Task[], task: Task) {\r\n  let tasks: Task[] = [];\r\n  if (task.type !== \"project\") {\r\n    tasks = taskList.filter(\r\n      t => t.dependencies && t.dependencies.indexOf(task.id) !== -1\r\n    );\r\n  } else {\r\n    tasks = taskList.filter(t => t.project && t.project === task.id);\r\n  }\r\n  var taskChildren: Task[] = [];\r\n  tasks.forEach(t => {\r\n    taskChildren.push(...getChildren(taskList, t));\r\n  })\r\n  tasks = tasks.concat(tasks, taskChildren);\r\n  return tasks;\r\n}\r\n\r\nexport const sortTasks = (taskA: Task, taskB: Task) => {\r\n  const orderA = taskA.displayOrder || Number.MAX_VALUE;\r\n  const orderB = taskB.displayOrder || Number.MAX_VALUE;\r\n  if (orderA > orderB) {\r\n    return 1;\r\n  } else if (orderA < orderB) {\r\n    return -1;\r\n  } else {\r\n    return 0;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport style from \"./bar.module.css\";\r\n\r\ntype BarDisplayProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  isSelected: boolean;\r\n  /* progress start point */\r\n  progressX: number;\r\n  progressWidth: number;\r\n  barCornerRadius: number;\r\n  styles: {\r\n    backgroundColor: string;\r\n    backgroundSelectedColor: string;\r\n    progressColor: string;\r\n    progressSelectedColor: string;\r\n  };\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  // isSelected,\r\n  progressX,\r\n  progressWidth,\r\n  // barCornerRadius,\r\n  styles,\r\n  onMouseDown,\r\n}) => {\r\n  const getProcessColor = () => {\r\n    return styles.progressColor;\r\n  };\r\n\r\n  const getBarColor = () => {\r\n    return styles.backgroundColor;\r\n  };\r\n\r\n  return (\r\n    <g onMouseDown={onMouseDown}>\r\n      <rect\r\n        x={x}\r\n        width={width}\r\n        y={y}\r\n        height={height}\r\n        ry={8}\r\n        rx={8}\r\n        fill={getBarColor()}\r\n        className={style.barBackground}\r\n      />\r\n      <rect\r\n        x={progressX}\r\n        width={progressWidth}\r\n        y={y}\r\n        height={height}\r\n        ry={8}\r\n        rx={8}\r\n        fill={getProcessColor()}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarDateHandleProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  barCornerRadius: number;\r\n  onMouseDown: (event: React.MouseEvent<SVGRectElement, MouseEvent>) => void;\r\n  backgroundColor: string;\r\n};\r\nexport const BarDateHandle: React.FC<BarDateHandleProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  barCornerRadius,\r\n  onMouseDown,\r\n  backgroundColor,\r\n}) => {\r\n  return (\r\n    <rect\r\n      x={x}\r\n      y={y}\r\n      width={width}\r\n      height={height}\r\n      className={styles.barHandle}\r\n      fill={backgroundColor}\r\n      ry={barCornerRadius}\r\n      rx={barCornerRadius}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarProgressHandleProps = {\r\n  progressPoint: string;\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarProgressHandle: React.FC<BarProgressHandleProps> = ({\r\n  progressPoint,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <polygon\r\n      className={styles.barHandle}\r\n      points={progressPoint}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\nimport { BarDateHandle } from \"./bar-date-handle\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\n\r\nexport const Bar: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  rtl,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const progressPoint = getProgressPoint(\r\n    +!rtl * task.progressWidth + task.progressX,\r\n    task.y,\r\n    task.height\r\n  );\r\n  const handleHeight = task.height - 2;\r\n  return (\r\n    <g className={styles.barWrapper} tabIndex={0}>\r\n      <BarDisplay\r\n        x={task.x1}\r\n        y={task.y}\r\n        width={task.hide ? 0 : task.x2 - task.x1}\r\n        height={task.hide ? 0 : task.height}\r\n        progressX={task.progressX}\r\n        progressWidth={task.progressWidth}\r\n        barCornerRadius={task.barCornerRadius}\r\n        styles={task.styles}\r\n        isSelected={isSelected}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n      <g className=\"handleGroup\">\r\n        {isDateChangeable && (\r\n          <g>\r\n            {/* left */}\r\n            <BarDateHandle\r\n              x={task.x1 + 1}\r\n              y={task.y + 1}\r\n              width={task.handleWidth}\r\n              height={handleHeight}\r\n              barCornerRadius={5}\r\n              onMouseDown={e => {\r\n                onEventStart(\"start\", task, e);\r\n              }}\r\n              backgroundColor={task.styles.backgroundSelectedColor}\r\n            />\r\n            {/* right */}\r\n            <BarDateHandle\r\n              x={task.x2 - task.handleWidth - 1}\r\n              y={task.y + 1}\r\n              width={task.handleWidth}\r\n              height={handleHeight}\r\n              barCornerRadius={5}\r\n              onMouseDown={e => {\r\n                onEventStart(\"end\", task, e);\r\n              }}\r\n              backgroundColor={task.styles.backgroundSelectedColor}\r\n            />\r\n          </g>\r\n        )}\r\n        {isProgressChangeable && (\r\n          <BarProgressHandle\r\n            progressPoint={progressPoint}\r\n            onMouseDown={e => {\r\n              onEventStart(\"progress\", task, e);\r\n            }}\r\n          />\r\n        )}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\n\r\nexport const BarSmall: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const progressPoint = getProgressPoint(\r\n    task.progressWidth + task.x1,\r\n    task.y,\r\n    task.height\r\n  );\r\n  return (\r\n    <g className={styles.barWrapper} tabIndex={0}>\r\n      <BarDisplay\r\n        x={task.x1}\r\n        y={task.y}\r\n        width={task.x2 - task.x1}\r\n        height={task.height}\r\n        progressX={task.progressX}\r\n        progressWidth={task.progressWidth}\r\n        barCornerRadius={task.barCornerRadius}\r\n        styles={task.styles}\r\n        isSelected={isSelected}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n      <g className=\"handleGroup\">\r\n        {isProgressChangeable && (\r\n          <BarProgressHandle\r\n            progressPoint={progressPoint}\r\n            onMouseDown={e => {\r\n              onEventStart(\"progress\", task, e);\r\n            }}\r\n          />\r\n        )}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./milestone.module.css\";\r\n\r\nexport const Milestone: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const transform = `rotate(45 ${task.x1 + task.height * 0.356} \r\n    ${task.y + task.height * 0.85})`;\r\n  const getBarColor = () => {\r\n    return isSelected\r\n      ? task.styles.backgroundSelectedColor\r\n      : task.styles.backgroundColor;\r\n  };\r\n\r\n  return (\r\n    <g tabIndex={0} className={styles.milestoneWrapper}>\r\n      <rect\r\n        fill={getBarColor()}\r\n        x={task.x1}\r\n        width={task.height}\r\n        y={task.y}\r\n        height={task.height}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        transform={transform}\r\n        className={styles.milestoneBackground}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./project.module.css\";\r\n\r\nexport const Project: React.FC<TaskItemProps> = ({ task }) => {\r\n  const barColor = task.styles.backgroundColor;\r\n  const processColor = task.styles.progressColor;\r\n  const projectWith = task.x2 - task.x1;\r\n\r\n  // const projectLeftTriangle = [\r\n  //   task.x1,\r\n  //   task.y + task.height / 2 - 1,\r\n  //   task.x1,\r\n  //   task.y + task.height,\r\n  //   task.x1 + 15,\r\n  //   task.y + task.height / 2 - 1,\r\n  // ].join(\",\");\r\n  // const projectRightTriangle = [\r\n  //   task.x2,\r\n  //   task.y + task.height / 2 - 1,\r\n  //   task.x2,\r\n  //   task.y + task.height,\r\n  //   task.x2 - 15,\r\n  //   task.y + task.height / 2 - 1,\r\n  // ].join(\",\");\r\n\r\n  return (\r\n    <g tabIndex={0} className={styles.projectWrapper}>\r\n      <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y + 5}\r\n        height={task.height * 0.5}\r\n        ry={8}\r\n        rx={8}\r\n        className={styles.projectBackground}\r\n      />\r\n      <rect\r\n        x={task.progressX}\r\n        width={task.progressWidth}\r\n        y={task.y + 5}\r\n        height={task.height * 0.5}\r\n        ry={8}\r\n        rx={8}\r\n        fill={processColor}\r\n      />\r\n      {/* <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height / 2}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectTop}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectLeftTriangle}\r\n        fill={barColor}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectRightTriangle}\r\n        fill={barColor}\r\n      /> */}\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { GanttContentMoveAction } from \"../../types/gantt-task-actions\";\r\nimport { Bar } from \"./bar/bar\";\r\nimport { BarSmall } from \"./bar/bar-small\";\r\nimport { Milestone } from \"./milestone/milestone\";\r\nimport { Project } from \"./project/project\";\r\nimport style from \"./task-list.module.css\";\r\n\r\nexport type TaskItemProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  taskHeight: number;\r\n  isProgressChangeable: boolean;\r\n  isDateChangeable: boolean;\r\n  isDelete: boolean;\r\n  isSelected: boolean;\r\n  rtl: boolean;\r\n  onEventStart: (\r\n    action: GanttContentMoveAction,\r\n    selectedTask: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => any;\r\n};\r\n\r\nexport const TaskItem: React.FC<TaskItemProps> = props => {\r\n  const {\r\n    task,\r\n    arrowIndent,\r\n    isDelete,\r\n    taskHeight,\r\n    isSelected,\r\n    rtl,\r\n    onEventStart,\r\n  } = {\r\n    ...props,\r\n  };\r\n  const textRef = useRef<SVGTextElement>(null);\r\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\r\n  const [isTextInside] = useState(false);\r\n\r\n  useEffect(() => {\r\n    switch (task.typeInternal) {\r\n      case \"milestone\":\r\n        setTaskItem(<Milestone {...props} />);\r\n        break;\r\n      case \"project\":\r\n        setTaskItem(<Project {...props} />);\r\n        break;\r\n      case \"smalltask\":\r\n        setTaskItem(<BarSmall {...props} />);\r\n        break;\r\n      default:\r\n        setTaskItem(<Bar {...props} />);\r\n        break;\r\n    }\r\n  }, [task, isSelected]);\r\n\r\n  // useEffect(() => {\r\n  //   if (textRef.current) {\r\n  //     setIsTextInside(textRef.current.getBBox().width < task.x2 - task.x1);\r\n  //   }\r\n  // }, [textRef, task]);\r\n\r\n  const getX = () => {\r\n    const width = task.x2 - task.x1;\r\n    const hasChild = task.barChildren.length > 0;\r\n    if (isTextInside) {\r\n      return task.x1 + width * 0.5;\r\n    }\r\n    if (rtl && textRef.current) {\r\n      return (\r\n        task.x1 -\r\n        textRef.current.getBBox().width -\r\n        arrowIndent * +hasChild -\r\n        arrowIndent * 0.2\r\n      );\r\n    } else {\r\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <g\r\n      onKeyDown={e => {\r\n        switch (e.key) {\r\n          case \"Delete\": {\r\n            if (isDelete) onEventStart(\"delete\", task, e);\r\n            break;\r\n          }\r\n        }\r\n        e.stopPropagation();\r\n      }}\r\n      onMouseEnter={e => {\r\n        onEventStart(\"mouseenter\", task, e);\r\n      }}\r\n      onMouseLeave={e => {\r\n        onEventStart(\"mouseleave\", task, e);\r\n      }}\r\n      onDoubleClick={e => {\r\n        onEventStart(\"dblclick\", task, e);\r\n      }}\r\n      onClick={e => {\r\n        onEventStart(\"click\", task, e);\r\n      }}\r\n      onFocus={() => {\r\n        onEventStart(\"select\", task);\r\n      }}\r\n    >\r\n      {taskItem}\r\n      {task.typeInternal === \"task\" && !task.hide && (\r\n        <text\r\n          x={getX()}\r\n          y={task.y + taskHeight * 0.65}\r\n          className={\r\n            isTextInside\r\n              ? style.barLabel\r\n              : style.barLabel && style.barLabelOutside\r\n          }\r\n          ref={textRef}\r\n        >\r\n          {task.name}\r\n        </text>\r\n      )}\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { EventOption } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Arrow } from \"../other/arrow\";\r\nimport { handleTaskBySVGMouseEvent } from \"../../helpers/bar-helper\";\r\nimport { isKeyboardEvent } from \"../../helpers/other-helper\";\r\nimport { TaskItem } from \"../task-item/task-item\";\r\nimport {\r\n  BarMoveAction,\r\n  GanttContentMoveAction,\r\n  GanttEvent,\r\n} from \"../../types/gantt-task-actions\";\r\n\r\nexport type TaskGanttContentProps = {\r\n  tasks: BarTask[];\r\n  dates: Date[];\r\n  ganttEvent: GanttEvent;\r\n  selectedTask: BarTask | undefined;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  timeStep: number;\r\n  svg?: React.RefObject<SVGSVGElement>;\r\n  svgWidth: number;\r\n  taskHeight: number;\r\n  arrowColor: string;\r\n  arrowIndent: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  rtl: boolean;\r\n  setGanttEvent: (value: GanttEvent) => void;\r\n  setFailedTask: (value: BarTask | null) => void;\r\n  setSelectedTask: (taskId: string) => void;\r\n} & EventOption;\r\n\r\nexport const TaskGanttContent: React.FC<TaskGanttContentProps> = ({\r\n  tasks,\r\n  dates,\r\n  ganttEvent,\r\n  selectedTask,\r\n  rowHeight,\r\n  columnWidth,\r\n  timeStep,\r\n  svg,\r\n  taskHeight,\r\n  arrowColor,\r\n  arrowIndent,\r\n  fontFamily,\r\n  fontSize,\r\n  rtl,\r\n  setGanttEvent,\r\n  setFailedTask,\r\n  setSelectedTask,\r\n  onDateChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onClick,\r\n  onDelete,\r\n}) => {\r\n  const point = svg?.current?.createSVGPoint();\r\n  const [xStep, setXStep] = useState(0);\r\n  const [initEventX1Delta, setInitEventX1Delta] = useState(0);\r\n  const [isMoving, setIsMoving] = useState(false);\r\n\r\n  // create xStep\r\n  useEffect(() => {\r\n    const dateDelta =\r\n      dates[1].getTime() -\r\n      dates[0].getTime() -\r\n      dates[1].getTimezoneOffset() * 60 * 1000 +\r\n      dates[0].getTimezoneOffset() * 60 * 1000;\r\n    const newXStep = (timeStep * columnWidth) / dateDelta;\r\n    setXStep(newXStep);\r\n  }, [columnWidth, dates, timeStep]);\r\n\r\n  useEffect(() => {\r\n    const handleMouseMove = async (event: MouseEvent) => {\r\n      if (!ganttEvent.changedTask || !point || !svg?.current) return;\r\n      event.preventDefault();\r\n\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg?.current.getScreenCTM()?.inverse()\r\n      );\r\n\r\n      const { isChanged, changedTask } = handleTaskBySVGMouseEvent(\r\n        cursor.x,\r\n        ganttEvent.action as BarMoveAction,\r\n        ganttEvent.changedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n      if (isChanged) {\r\n        setGanttEvent({ action: ganttEvent.action, changedTask });\r\n      }\r\n    };\r\n\r\n    const handleMouseUp = async (event: MouseEvent) => {\r\n      const { action, originalSelectedTask, changedTask } = ganttEvent;\r\n      if (!changedTask || !point || !svg?.current || !originalSelectedTask)\r\n        return;\r\n      event.preventDefault();\r\n\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg?.current.getScreenCTM()?.inverse()\r\n      );\r\n      const { changedTask: newChangedTask } = handleTaskBySVGMouseEvent(\r\n        cursor.x,\r\n        action as BarMoveAction,\r\n        changedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n\r\n      const isNotLikeOriginal =\r\n        originalSelectedTask.start !== newChangedTask.start ||\r\n        originalSelectedTask.end !== newChangedTask.end ||\r\n        originalSelectedTask.progress !== newChangedTask.progress;\r\n\r\n      // remove listeners\r\n      svg.current.removeEventListener(\"mousemove\", handleMouseMove);\r\n      svg.current.removeEventListener(\"mouseup\", handleMouseUp);\r\n      setGanttEvent({ action: \"\" });\r\n      setIsMoving(false);\r\n\r\n      // custom operation start\r\n      let operationSuccess = true;\r\n      if (\r\n        (action === \"move\" || action === \"end\" || action === \"start\") &&\r\n        onDateChange &&\r\n        isNotLikeOriginal\r\n      ) {\r\n        try {\r\n          const result = await onDateChange(\r\n            newChangedTask,\r\n            newChangedTask.barChildren\r\n          );\r\n          if (result !== undefined) {\r\n            operationSuccess = result;\r\n          }\r\n        } catch (error) {\r\n          operationSuccess = false;\r\n        }\r\n      } else if (onProgressChange && isNotLikeOriginal) {\r\n        try {\r\n          const result = await onProgressChange(\r\n            newChangedTask,\r\n            newChangedTask.barChildren\r\n          );\r\n          if (result !== undefined) {\r\n            operationSuccess = result;\r\n          }\r\n        } catch (error) {\r\n          operationSuccess = false;\r\n        }\r\n      }\r\n\r\n      // If operation is failed - return old state\r\n      if (!operationSuccess) {\r\n        setFailedTask(originalSelectedTask);\r\n      }\r\n    };\r\n\r\n    if (\r\n      !isMoving &&\r\n      (ganttEvent.action === \"move\" ||\r\n        ganttEvent.action === \"end\" ||\r\n        ganttEvent.action === \"start\" ||\r\n        ganttEvent.action === \"progress\") &&\r\n      svg?.current\r\n    ) {\r\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\r\n      svg.current.addEventListener(\"mouseup\", handleMouseUp);\r\n      setIsMoving(true);\r\n    }\r\n  }, [\r\n    ganttEvent,\r\n    xStep,\r\n    initEventX1Delta,\r\n    onProgressChange,\r\n    timeStep,\r\n    onDateChange,\r\n    svg,\r\n    isMoving,\r\n    point,\r\n    rtl,\r\n    setFailedTask,\r\n    setGanttEvent,\r\n  ]);\r\n\r\n  /**\r\n   * Method is Start point of task change\r\n   */\r\n  const handleBarEventStart = async (\r\n    action: GanttContentMoveAction,\r\n    task: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => {\r\n    if (!event) {\r\n      if (action === \"select\") {\r\n        setSelectedTask(task.id);\r\n      }\r\n    }\r\n    // Keyboard events\r\n    else if (isKeyboardEvent(event)) {\r\n      if (action === \"delete\") {\r\n        if (onDelete) {\r\n          try {\r\n            const result = await onDelete(task);\r\n            if (result !== undefined && result) {\r\n              setGanttEvent({ action, changedTask: task });\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error on Delete. \" + error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Mouse Events\r\n    else if (action === \"mouseenter\") {\r\n      if (!ganttEvent.action) {\r\n        setGanttEvent({\r\n          action,\r\n          changedTask: task,\r\n          originalSelectedTask: task,\r\n        });\r\n      }\r\n    } else if (action === \"mouseleave\") {\r\n      if (ganttEvent.action === \"mouseenter\") {\r\n        setGanttEvent({ action: \"\" });\r\n      }\r\n    } else if (action === \"dblclick\") {\r\n      !!onDoubleClick && onDoubleClick(task);\r\n    } else if (action === \"click\") {\r\n      !!onClick && onClick(task);\r\n    }\r\n    // Change task event start\r\n    else if (action === \"move\") {\r\n      if (!svg?.current || !point) return;\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg.current.getScreenCTM()?.inverse()\r\n      );\r\n      setInitEventX1Delta(cursor.x - task.x1);\r\n      setGanttEvent({\r\n        action,\r\n        changedTask: task,\r\n        originalSelectedTask: task,\r\n      });\r\n    } else {\r\n      setGanttEvent({\r\n        action,\r\n        changedTask: task,\r\n        originalSelectedTask: task,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <g className=\"content\">\r\n      <g className=\"arrows\" fill={arrowColor} stroke={arrowColor}>\r\n        {tasks.map(task => {\r\n          return task.barChildren.map(child => {\r\n            return (\r\n              <Arrow\r\n                key={`Arrow from ${task.id} to ${tasks[child.index].id}`}\r\n                taskFrom={task}\r\n                taskTo={tasks[child.index]}\r\n                rowHeight={rowHeight}\r\n                taskHeight={taskHeight}\r\n                arrowIndent={arrowIndent}\r\n                rtl={rtl}\r\n              />\r\n            );\r\n          });\r\n        })}\r\n      </g>\r\n      <g className=\"bar\" fontFamily={fontFamily} fontSize={fontSize}>\r\n        {tasks.map(task => {\r\n          return (\r\n            <TaskItem\r\n              task={task}\r\n              arrowIndent={arrowIndent}\r\n              taskHeight={taskHeight}\r\n              isProgressChangeable={!!onProgressChange && !task.isDisabled}\r\n              isDateChangeable={!!onDateChange && !task.isDisabled}\r\n              isDelete={!task.isDisabled}\r\n              onEventStart={handleBarEventStart}\r\n              key={task.id}\r\n              isSelected={!!selectedTask && task.id === selectedTask.id}\r\n              rtl={rtl}\r\n            />\r\n          );\r\n        })}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { GridProps, Grid } from \"../grid/grid\";\r\nimport { CalendarProps, Calendar } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps, TaskGanttContent } from \"./task-gantt-content\";\r\nimport styles from \"./gantt.module.css\";\r\n\r\nexport type TaskGanttProps = {\r\n  gridProps: GridProps;\r\n  calendarProps: CalendarProps;\r\n  barProps: TaskGanttContentProps;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  scrollX: number;\r\n};\r\nexport const TaskGantt: React.FC<TaskGanttProps> = ({\r\n  gridProps,\r\n  calendarProps,\r\n  barProps,\r\n  ganttHeight,\r\n  scrollY,\r\n  scrollX,\r\n}) => {\r\n  const ganttSVGRef = useRef<SVGSVGElement>(null);\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  const verticalGanttContainerRef = useRef<HTMLDivElement>(null);\r\n  const newBarProps = { ...barProps, svg: ganttSVGRef };\r\n\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  useEffect(() => {\r\n    if (verticalGanttContainerRef.current) {\r\n      verticalGanttContainerRef.current.scrollLeft = scrollX;\r\n    }\r\n  }, [scrollX]);\r\n\r\n  return (\r\n    <div\r\n      className={styles.ganttVerticalContainer}\r\n      ref={verticalGanttContainerRef}\r\n      dir=\"ltr\"\r\n    >\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={gridProps.svgWidth}\r\n        height={calendarProps.headerHeight}\r\n        fontFamily={barProps.fontFamily}\r\n      >\r\n        <Calendar {...calendarProps} />\r\n      </svg>\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={styles.horizontalContainer}\r\n        style={\r\n          ganttHeight\r\n            ? { height: ganttHeight, width: gridProps.svgWidth }\r\n            : { width: gridProps.svgWidth }\r\n        }\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width={gridProps.svgWidth}\r\n          height={barProps.rowHeight * barProps.tasks.length}\r\n          fontFamily={barProps.fontFamily}\r\n          ref={ganttSVGRef}\r\n        >\r\n          <Grid {...gridProps} />\r\n          <TaskGanttContent {...newBarProps} />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport styles from \"./horizontal-scroll.module.css\";\r\n\r\nexport const HorizontalScroll: React.FC<{\r\n  scroll: number;\r\n  svgWidth: number;\r\n  taskListWidth: number;\r\n  rtl: boolean;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n}> = ({ scroll, svgWidth, taskListWidth, rtl, onScroll }) => {\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollLeft = scroll;\r\n    }\r\n  }, [scroll]);\r\n\r\n  return (\r\n    <div\r\n      dir=\"ltr\"\r\n      style={{\r\n        margin: rtl\r\n          ? `0px ${taskListWidth}px 0px 0px`\r\n          : `0px 0px 0px ${taskListWidth}px`,\r\n      }}\r\n      className={styles.scrollWrapper}\r\n      onScroll={onScroll}\r\n      ref={scrollRef}\r\n    >\r\n      <div style={{ width: svgWidth }} className={styles.scroll} />\r\n    </div>\r\n  );\r\n};\r\n","import React, {\r\n  useState,\r\n  SyntheticEvent,\r\n  useRef,\r\n  useEffect,\r\n  useMemo,\r\n} from \"react\";\r\nimport { ViewMode, GanttProps, Task } from \"../../types/public-types\";\r\nimport { GridProps } from \"../grid/grid\";\r\nimport { ganttDateRange, seedDates } from \"../../helpers/date-helper\";\r\nimport { CalendarProps } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps } from \"./task-gantt-content\";\r\nimport { TaskListHeaderDefault } from \"../task-list/task-list-header\";\r\nimport { TaskListTableDefault } from \"../task-list/task-list-table\";\r\nimport { StandardTooltipContent, Tooltip } from \"../other/tooltip\";\r\nimport { VerticalScroll } from \"../other/vertical-scroll\";\r\nimport { TaskListProps, TaskList } from \"../task-list/task-list\";\r\nimport { TaskGantt } from \"./task-gantt\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { convertToBarTasks } from \"../../helpers/bar-helper\";\r\nimport { GanttEvent } from \"../../types/gantt-task-actions\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport { HorizontalScroll } from \"../other/horizontal-scroll\";\r\nimport { removeHiddenTasks, sortTasks } from \"../../helpers/other-helper\";\r\nimport styles from \"./gantt.module.css\";\r\n\r\nexport const Gantt: React.FunctionComponent<GanttProps> = ({\r\n  tasks,\r\n  headerHeight = 50,\r\n  columnWidth = 60,\r\n  listCellWidth = \"155px\",\r\n  rowHeight = 50,\r\n  ganttHeight = 0,\r\n  viewMode = ViewMode.Day,\r\n  preStepsCount = 1,\r\n  locale = \"en-GB\",\r\n  barFill = 60,\r\n  barCornerRadius = 3,\r\n  barProgressColor = \"#a3a3ff\",\r\n  barProgressSelectedColor = \"#8282f5\",\r\n  barBackgroundColor = \"#b8c2cc\",\r\n  barBackgroundSelectedColor = \"#aeb8c2\",\r\n  projectProgressColor = \"#7db59a\",\r\n  projectProgressSelectedColor = \"#59a985\",\r\n  projectBackgroundColor = \"#fac465\",\r\n  projectBackgroundSelectedColor = \"#f7bb53\",\r\n  milestoneBackgroundColor = \"#f1c453\",\r\n  milestoneBackgroundSelectedColor = \"#f29e4c\",\r\n  rtl = false,\r\n  handleWidth = 8,\r\n  timeStep = 300000,\r\n  arrowColor = \"grey\",\r\n  fontFamily = \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\",\r\n  fontSize = \"14px\",\r\n  arrowIndent = 20,\r\n  todayColor = \"rgba(252, 248, 227, 0.5)\",\r\n  viewDate,\r\n  TooltipContent = StandardTooltipContent,\r\n  TaskListHeader = TaskListHeaderDefault,\r\n  TaskListTable = TaskListTableDefault,\r\n  onDateChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onClick,\r\n  onDelete,\r\n  onSelect,\r\n  onExpanderClick,\r\n}) => {\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const taskListRef = useRef<HTMLDivElement>(null);\r\n  const [dateSetup, setDateSetup] = useState<DateSetup>(() => {\r\n    const [startDate, endDate] = ganttDateRange(tasks, viewMode, preStepsCount);\r\n    return { viewMode, dates: seedDates(startDate, endDate, viewMode) };\r\n  });\r\n  const [currentViewDate, setCurrentViewDate] = useState<Date | undefined>(\r\n    undefined\r\n  );\r\n\r\n  const [taskListWidth, setTaskListWidth] = useState(0);\r\n  const [svgContainerWidth, setSvgContainerWidth] = useState(0);\r\n  const [svgContainerHeight, setSvgContainerHeight] = useState(ganttHeight);\r\n  const [barTasks, setBarTasks] = useState<BarTask[]>([]);\r\n  const [ganttEvent, setGanttEvent] = useState<GanttEvent>({\r\n    action: \"\",\r\n  });\r\n  const taskHeight = useMemo(\r\n    () => (rowHeight * barFill) / 100,\r\n    [rowHeight, barFill]\r\n  );\r\n\r\n  const [selectedTask, setSelectedTask] = useState<BarTask>();\r\n  const [failedTask, setFailedTask] = useState<BarTask | null>(null);\r\n\r\n  const svgWidth = dateSetup.dates.length * columnWidth;\r\n  const ganttFullHeight = barTasks.length * rowHeight;\r\n\r\n  const [scrollY, setScrollY] = useState(0);\r\n  const [scrollX, setScrollX] = useState(-1);\r\n  const [ignoreScrollEvent, setIgnoreScrollEvent] = useState(false);\r\n\r\n  // task change events\r\n  useEffect(() => {\r\n    let filteredTasks: Task[];\r\n    if (onExpanderClick) {\r\n      filteredTasks = removeHiddenTasks(tasks);\r\n    } else {\r\n      filteredTasks = tasks;\r\n    }\r\n    filteredTasks = filteredTasks.sort(sortTasks);\r\n    const [startDate, endDate] = ganttDateRange(\r\n      filteredTasks,\r\n      viewMode,\r\n      preStepsCount\r\n    );\r\n    let newDates = seedDates(startDate, endDate, viewMode);\r\n    if (rtl) {\r\n      newDates = newDates.reverse();\r\n      if (scrollX === -1) {\r\n        setScrollX(newDates.length * columnWidth);\r\n      }\r\n    }\r\n    setDateSetup({ dates: newDates, viewMode });\r\n    setBarTasks(\r\n      convertToBarTasks(\r\n        filteredTasks,\r\n        newDates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      )\r\n    );\r\n  }, [\r\n    tasks,\r\n    viewMode,\r\n    preStepsCount,\r\n    rowHeight,\r\n    barCornerRadius,\r\n    columnWidth,\r\n    taskHeight,\r\n    handleWidth,\r\n    barProgressColor,\r\n    barProgressSelectedColor,\r\n    barBackgroundColor,\r\n    barBackgroundSelectedColor,\r\n    projectProgressColor,\r\n    projectProgressSelectedColor,\r\n    projectBackgroundColor,\r\n    projectBackgroundSelectedColor,\r\n    milestoneBackgroundColor,\r\n    milestoneBackgroundSelectedColor,\r\n    rtl,\r\n    scrollX,\r\n    onExpanderClick,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      viewMode === dateSetup.viewMode &&\r\n      ((viewDate && !currentViewDate) ||\r\n        (viewDate && currentViewDate?.valueOf() !== viewDate.valueOf()))\r\n    ) {\r\n      const dates = dateSetup.dates;\r\n      const index = dates.findIndex(\r\n        (d, i) =>\r\n          viewDate.valueOf() >= d.valueOf() &&\r\n          i + 1 !== dates.length &&\r\n          viewDate.valueOf() < dates[i + 1].valueOf()\r\n      );\r\n      if (index === -1) {\r\n        return;\r\n      }\r\n      setCurrentViewDate(viewDate);\r\n      setScrollX(columnWidth * index);\r\n    }\r\n  }, [\r\n    viewDate,\r\n    columnWidth,\r\n    dateSetup.dates,\r\n    dateSetup.viewMode,\r\n    viewMode,\r\n    currentViewDate,\r\n    setCurrentViewDate,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const { changedTask, action } = ganttEvent;\r\n    if (changedTask) {\r\n      if (action === \"delete\") {\r\n        setGanttEvent({ action: \"\" });\r\n        setBarTasks(barTasks.filter(t => t.id !== changedTask.id));\r\n      } else if (\r\n        action === \"move\" ||\r\n        action === \"end\" ||\r\n        action === \"start\" ||\r\n        action === \"progress\"\r\n      ) {\r\n        const prevStateTask = barTasks.find(t => t.id === changedTask.id);\r\n        if (\r\n          prevStateTask &&\r\n          prevStateTask.start &&\r\n          prevStateTask.end &&\r\n          (prevStateTask.start.getTime() !== changedTask.start.getTime() ||\r\n            prevStateTask.end.getTime() !== changedTask.end.getTime() ||\r\n            prevStateTask.progress !== changedTask.progress)\r\n        ) {\r\n          // actions for change\r\n          const newTaskList = barTasks.map(t =>\r\n            t.id === changedTask.id ? changedTask : t\r\n          );\r\n          setBarTasks(newTaskList);\r\n        }\r\n      }\r\n    }\r\n  }, [ganttEvent, barTasks]);\r\n\r\n  useEffect(() => {\r\n    if (failedTask) {\r\n      setBarTasks(barTasks.map(t => (t.id !== failedTask.id ? t : failedTask)));\r\n      setFailedTask(null);\r\n    }\r\n  }, [failedTask, barTasks]);\r\n\r\n  useEffect(() => {\r\n    if (!listCellWidth) {\r\n      setTaskListWidth(0);\r\n    }\r\n    if (taskListRef.current) {\r\n      setTaskListWidth(taskListRef.current.offsetWidth);\r\n    }\r\n  }, [taskListRef, listCellWidth]);\r\n\r\n  useEffect(() => {\r\n    if (wrapperRef.current) {\r\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\r\n    }\r\n  }, [wrapperRef, taskListWidth]);\r\n\r\n  useEffect(() => {\r\n    if (ganttHeight) {\r\n      setSvgContainerHeight(ganttHeight + headerHeight);\r\n    } else {\r\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\r\n    }\r\n  }, [ganttHeight, tasks, headerHeight, rowHeight]);\r\n\r\n  // scroll events\r\n  useEffect(() => {\r\n    const handleWheel = (event: WheelEvent) => {\r\n      if (event.shiftKey || event.deltaX) {\r\n        const scrollMove = event.deltaX ? event.deltaX : event.deltaY;\r\n        let newScrollX = scrollX + scrollMove;\r\n        if (newScrollX < 0) {\r\n          newScrollX = 0;\r\n        } else if (newScrollX > svgWidth) {\r\n          newScrollX = svgWidth;\r\n        }\r\n        setScrollX(newScrollX);\r\n        event.preventDefault();\r\n      } else if (ganttHeight) {\r\n        let newScrollY = scrollY + event.deltaY;\r\n        if (newScrollY < 0) {\r\n          newScrollY = 0;\r\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n          newScrollY = ganttFullHeight - ganttHeight;\r\n        }\r\n        if (newScrollY !== scrollY) {\r\n          setScrollY(newScrollY);\r\n          event.preventDefault();\r\n        }\r\n      }\r\n\r\n      setIgnoreScrollEvent(true);\r\n    };\r\n\r\n    // subscribe if scroll is necessary\r\n    wrapperRef.current?.addEventListener(\"wheel\", handleWheel, {\r\n      passive: false,\r\n    });\r\n    return () => {\r\n      wrapperRef.current?.removeEventListener(\"wheel\", handleWheel);\r\n    };\r\n  }, [\r\n    wrapperRef,\r\n    scrollY,\r\n    scrollX,\r\n    ganttHeight,\r\n    svgWidth,\r\n    rtl,\r\n    ganttFullHeight,\r\n  ]);\r\n\r\n  const handleScrollY = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\r\n      setScrollY(event.currentTarget.scrollTop);\r\n      setIgnoreScrollEvent(true);\r\n    } else {\r\n      setIgnoreScrollEvent(false);\r\n    }\r\n  };\r\n\r\n  const handleScrollX = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\r\n      setScrollX(event.currentTarget.scrollLeft);\r\n      setIgnoreScrollEvent(true);\r\n    } else {\r\n      setIgnoreScrollEvent(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handles arrow keys events and transform it to new scroll\r\n   */\r\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    let newScrollY = scrollY;\r\n    let newScrollX = scrollX;\r\n    let isX = true;\r\n    switch (event.key) {\r\n      case \"Down\": // IE/Edge specific value\r\n      case \"ArrowDown\":\r\n        newScrollY += rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Up\": // IE/Edge specific value\r\n      case \"ArrowUp\":\r\n        newScrollY -= rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Left\":\r\n      case \"ArrowLeft\":\r\n        newScrollX -= columnWidth;\r\n        break;\r\n      case \"Right\": // IE/Edge specific value\r\n      case \"ArrowRight\":\r\n        newScrollX += columnWidth;\r\n        break;\r\n    }\r\n    if (isX) {\r\n      if (newScrollX < 0) {\r\n        newScrollX = 0;\r\n      } else if (newScrollX > svgWidth) {\r\n        newScrollX = svgWidth;\r\n      }\r\n      setScrollX(newScrollX);\r\n    } else {\r\n      if (newScrollY < 0) {\r\n        newScrollY = 0;\r\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n        newScrollY = ganttFullHeight - ganttHeight;\r\n      }\r\n      setScrollY(newScrollY);\r\n    }\r\n    setIgnoreScrollEvent(true);\r\n  };\r\n\r\n  /**\r\n   * Task select event\r\n   */\r\n  const handleSelectedTask = (taskId: string) => {\r\n    const newSelectedTask = barTasks.find(t => t.id === taskId);\r\n    const oldSelectedTask = barTasks.find(\r\n      t => !!selectedTask && t.id === selectedTask.id\r\n    );\r\n    if (onSelect) {\r\n      if (oldSelectedTask) {\r\n        onSelect(oldSelectedTask, false);\r\n      }\r\n      if (newSelectedTask) {\r\n        onSelect(newSelectedTask, true);\r\n      }\r\n    }\r\n    setSelectedTask(newSelectedTask);\r\n  };\r\n  const handleExpanderClick = (task: Task) => {\r\n    if (onExpanderClick && task.hideChildren !== undefined) {\r\n      onExpanderClick({ ...task, hideChildren: !task.hideChildren });\r\n    }\r\n  };\r\n  const gridProps: GridProps = {\r\n    columnWidth,\r\n    svgWidth,\r\n    tasks: tasks,\r\n    rowHeight,\r\n    dates: dateSetup.dates,\r\n    todayColor,\r\n    rtl,\r\n  };\r\n  const calendarProps: CalendarProps = {\r\n    dateSetup,\r\n    locale,\r\n    viewMode,\r\n    headerHeight,\r\n    columnWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    rtl,\r\n  };\r\n  const barProps: TaskGanttContentProps = {\r\n    tasks: barTasks,\r\n    dates: dateSetup.dates,\r\n    ganttEvent,\r\n    selectedTask,\r\n    rowHeight,\r\n    taskHeight,\r\n    columnWidth,\r\n    arrowColor,\r\n    timeStep,\r\n    fontFamily,\r\n    fontSize,\r\n    arrowIndent,\r\n    svgWidth,\r\n    rtl,\r\n    setGanttEvent,\r\n    setFailedTask,\r\n    setSelectedTask: handleSelectedTask,\r\n    onDateChange,\r\n    onProgressChange,\r\n    onDoubleClick,\r\n    onClick,\r\n    onDelete,\r\n  };\r\n\r\n  const tableProps: TaskListProps = {\r\n    rowHeight,\r\n    rowWidth: listCellWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks: barTasks,\r\n    locale,\r\n    headerHeight,\r\n    scrollY,\r\n    ganttHeight,\r\n    horizontalContainerClass: styles.horizontalContainer,\r\n    selectedTask,\r\n    taskListRef,\r\n    setSelectedTask: handleSelectedTask,\r\n    onExpanderClick: handleExpanderClick,\r\n    TaskListHeader,\r\n    TaskListTable,\r\n  };\r\n  return (\r\n    <div>\r\n      <div\r\n        className={styles.wrapper}\r\n        onKeyDown={handleKeyDown}\r\n        tabIndex={0}\r\n        ref={wrapperRef}\r\n      >\r\n        {listCellWidth && <TaskList {...tableProps} />}\r\n        <TaskGantt\r\n          gridProps={gridProps}\r\n          calendarProps={calendarProps}\r\n          barProps={barProps}\r\n          ganttHeight={ganttHeight}\r\n          scrollY={scrollY}\r\n          scrollX={scrollX}\r\n        />\r\n        {ganttEvent.changedTask && (\r\n          <Tooltip\r\n            arrowIndent={arrowIndent}\r\n            rowHeight={rowHeight}\r\n            svgContainerHeight={svgContainerHeight}\r\n            svgContainerWidth={svgContainerWidth}\r\n            fontFamily={fontFamily}\r\n            fontSize={fontSize}\r\n            scrollX={scrollX}\r\n            scrollY={scrollY}\r\n            task={ganttEvent.changedTask}\r\n            headerHeight={headerHeight}\r\n            taskListWidth={taskListWidth}\r\n            TooltipContent={TooltipContent}\r\n            rtl={rtl}\r\n            svgWidth={svgWidth}\r\n          />\r\n        )}\r\n        <VerticalScroll\r\n          ganttFullHeight={ganttFullHeight}\r\n          ganttHeight={ganttHeight}\r\n          headerHeight={headerHeight}\r\n          scroll={scrollY}\r\n          onScroll={handleScrollY}\r\n          rtl={rtl}\r\n        />\r\n      </div>\r\n      <HorizontalScroll\r\n        svgWidth={svgWidth}\r\n        taskListWidth={taskListWidth}\r\n        scroll={scrollX}\r\n        rtl={rtl}\r\n        onScroll={handleScrollX}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"names":["ViewMode","intlDTCache","getCachedDateTimeFormat","locString","opts","key","JSON","stringify","dtf","Intl","DateTimeFormat","addToDate","date","quantity","scale","newDate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","startOfDate","scores","shouldReset","_scale","maxScore","indexOf","ganttDateRange","tasks","viewMode","preStepsCount","tasksWithDates","filter","task","start","end","newStartDate","month","newEndDate","_iterator","_createForOfIteratorHelperLoose","_step","done","value","Year","QuarterYear","Month","Week","getMonday","Day","QuarterDay","HalfDay","Hour","seedDates","startDate","endDate","currentDate","dates","push","getLocaleMonth","locale","bottomValue","format","replace","toLocaleUpperCase","getLocalDayOfWeek","weekday","day","getDay","diff","setDate","getWeekNumberISO8601","tmpDate","valueOf","dayNumber","firstThursday","setMonth","weekNumber","Math","ceil","toString","length","getDaysInMonth","year","TaskListHeaderDefault","_ref","headerHeight","fontFamily","fontSize","rowWidth","React","className","styles","ganttTable","style","ganttTable_Header","height","ganttTable_HeaderItem","minWidth","ganttTable_HeaderSeparator","marginTop","localeDateStringCache","toLocaleDateStringFactory","dateTimeOptions","lds","toLocaleDateString","TaskListTableDefault","rowHeight","onExpanderClick","useMemo","taskListWrapper","map","t","expanderSymbol","hideChildren","taskListTableRow","id","taskListCell","maxWidth","title","name","taskListNameWrapper","taskListExpander","taskListEmptyExpander","onClick","Tooltip","rtl","svgContainerHeight","svgContainerWidth","scrollX","scrollY","arrowIndent","taskListWidth","TooltipContent","tooltipRef","useRef","_useState","useState","relatedY","setRelatedY","_useState2","relatedX","setRelatedX","useEffect","current","tooltipHeight","offsetHeight","tooltipWidth","offsetWidth","newRelatedY","index","newRelatedX","x1","x2","tooltipLeftmostPoint","fullChartWidth","tooltipLowerPoint","ref","tooltipDetailsContainer","tooltipDetailsContainerHidden","left","top","StandardTooltipContent","_ref2","tooltipDefaultContainer","getTime","tooltipDefaultContainerParagraph","progress","VerticalScroll","scroll","ganttHeight","ganttFullHeight","onScroll","scrollRef","scrollTop","marginLeft","width","TaskList","selectedTask","setSelectedTask","taskListRef","horizontalContainerClass","TaskListHeader","TaskListTable","horizontalContainerRef","headerProps","selectedTaskId","tableProps","GridBody","svgWidth","columnWidth","todayColor","y","gridRows","rowLines","x","y1","y2","gridRowLine","gridRow","now","tickX","ticks","today","i","gridTick","fill","Grid","props","TopPartOfCalendar","xText","yText","calendarTopText","Calendar","dateSetup","getCalendarValuesForYear","topValues","bottomValues","topDefaultHeight","calendarBottomText","topValue","x1Line","y1Line","y2Line","getCalendarValuesForQuarterYear","quarter","floor","abs","getCalendarValuesForMonth","formatDate","getCalendarValuesForWeek","weeksCount","getCalendarValuesForDay","getCalendarValuesForPartOfDay","hour","getCalendarValuesForHour","displayDate","topPosition","_getCalendarValuesFor","_getCalendarValuesFor2","_getCalendarValuesFor3","_getCalendarValuesFor4","_getCalendarValuesFor5","_getCalendarValuesFor6","_getCalendarValuesFor7","calendarHeader","Arrow","taskFrom","taskTo","taskHeight","path","trianglePoints","_drownPathAndTriangle","drownPathAndTriangleRTL","_drownPathAndTriangle2","drownPathAndTriangle","strokeWidth","d","points","indexCompare","taskToEndPosition","taskFromEndPosition","taskFromHorizontalOffsetValue","taskToHorizontalOffsetValue","convertToBarTasks","barCornerRadius","handleWidth","barProgressColor","barProgressSelectedColor","barBackgroundColor","barBackgroundSelectedColor","projectProgressColor","projectProgressSelectedColor","projectBackgroundColor","projectBackgroundSelectedColor","milestoneBackgroundColor","milestoneBackgroundSelectedColor","barTasks","convertToBarTask","dependencies","_loop","j","dependence","findIndex","barChildren","barTask","type","convertToMilestone","convertToBar","taskXCoordinateRTL","taskXCoordinate","typeInternal","_progressWithByParams","progressWithByParams","progressWidth","progressX","taskYCoordinate","undefined","_extends","backgroundColor","backgroundSelectedColor","progressColor","progressSelectedColor","newX1","_x","newX2","_x2","rotatedHeight","xDate","remainderMillis","percentOfInterval","taskX1","taskX2","progressByX","barWidth","progressPercent","round","progressByXRTL","getProgressPoint","taskY","point","join","startByX","xStep","steps","additionalXValue","newX","endByX","moveByX","dateByX","taskX","taskDate","timeStep","getTimezoneOffset","handleTaskBySVGMouseEvent","svgX","action","initEventX1Delta","result","handleTaskBySVGMouseEventForMilestone","handleTaskBySVGMouseEventForBar","changedTask","isChanged","_progressWithByParams2","_progressWithByParams3","_progressWithByParams4","_moveByX","newMoveX1","newMoveX2","_progressWithByParams5","_moveByX2","isKeyboardEvent","event","removeHiddenTasks","groupedTasks","groupedTask","children","getChildren","taskList","project","taskChildren","forEach","apply","concat","sortTasks","taskA","taskB","orderA","displayOrder","Number","MAX_VALUE","orderB","BarDisplay","onMouseDown","getProcessColor","getBarColor","ry","rx","barBackground","BarDateHandle","barHandle","BarProgressHandle","progressPoint","Bar","isProgressChangeable","isDateChangeable","onEventStart","isSelected","handleHeight","barWrapper","tabIndex","hide","e","BarSmall","Milestone","transform","milestoneWrapper","milestoneBackground","Project","barColor","processColor","projectWith","projectWrapper","projectBackground","TaskItem","_props","isDelete","textRef","taskItem","setTaskItem","isTextInside","getX","hasChild","getBBox","onKeyDown","stopPropagation","onMouseEnter","onMouseLeave","onDoubleClick","onFocus","barLabel","barLabelOutside","TaskGanttContent","ganttEvent","svg","arrowColor","setGanttEvent","setFailedTask","onDateChange","onProgressChange","onDelete","_svg$current","createSVGPoint","setXStep","setInitEventX1Delta","_useState3","isMoving","setIsMoving","dateDelta","newXStep","handleMouseMove","Promise","resolve","preventDefault","clientX","cursor","matrixTransform","_svg$current$getScree","getScreenCTM","inverse","_handleTaskBySVGMouse","reject","handleMouseUp","operationSuccess","originalSelectedTask","_svg$current$getScree2","_handleTaskBySVGMouse2","newChangedTask","isNotLikeOriginal","removeEventListener","_temp4","_temp","_catch","then","_temp6","_temp2","_temp5","addEventListener","handleBarEventStart","_temp9","_temp8","_temp7","error","console","_svg$current$getScree3","stroke","child","isDisabled","TaskGantt","gridProps","calendarProps","barProps","ganttSVGRef","verticalGanttContainerRef","newBarProps","scrollLeft","ganttVerticalContainer","dir","xmlns","horizontalContainer","HorizontalScroll","margin","scrollWrapper","Gantt","_ref$headerHeight","_ref$columnWidth","_ref$listCellWidth","listCellWidth","_ref$rowHeight","_ref$ganttHeight","_ref$viewMode","_ref$preStepsCount","_ref$locale","_ref$barFill","barFill","_ref$barCornerRadius","_ref$barProgressColor","_ref$barProgressSelec","_ref$barBackgroundCol","_ref$barBackgroundSel","_ref$projectProgressC","_ref$projectProgressS","_ref$projectBackgroun","_ref$projectBackgroun2","_ref$milestoneBackgro","_ref$milestoneBackgro2","_ref$rtl","_ref$handleWidth","_ref$timeStep","_ref$arrowColor","_ref$fontFamily","_ref$fontSize","_ref$arrowIndent","_ref$todayColor","viewDate","_ref$TooltipContent","_ref$TaskListHeader","_ref$TaskListTable","onSelect","wrapperRef","_ganttDateRange","setDateSetup","currentViewDate","setCurrentViewDate","setTaskListWidth","_useState4","setSvgContainerWidth","_useState5","setSvgContainerHeight","_useState6","setBarTasks","_useState7","_useState8","_useState9","failedTask","_useState10","setScrollY","_useState11","setScrollX","_useState12","ignoreScrollEvent","setIgnoreScrollEvent","filteredTasks","sort","_ganttDateRange2","newDates","reverse","prevStateTask","find","newTaskList","handleWheel","shiftKey","deltaX","scrollMove","deltaY","newScrollX","newScrollY","_wrapperRef$current","passive","_wrapperRef$current2","handleScrollY","currentTarget","handleScrollX","handleKeyDown","isX","handleSelectedTask","taskId","newSelectedTask","oldSelectedTask","handleExpanderClick","wrapper"],"mappings":"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"}